- @item ||= item
- user = @item.user&.name || current_user.name
- time = @item.created_at&.strftime("%Y-%m-%d") || DateTime.now.strftime("%Y-%m-%d")
= form_for @item do |f|
  .panel.panel-default
    %a.panel-heading{data: {toggle: "collapse"}, href: "#general"}
      General
      %i.fa.fa-edit.pull-right
    .collapse.in{id: "general"}
      .row.form-row
        .col-xs-6
          .form-group
            = f.label :object, "Item"
            = f.text_field :object, class: "form-control", placeholder: "eg: syringe, acetaminophen, heart monitor"
        .col-xs-6
          .form-group
            = f.label :packaged_quantity, "Packaged Quantity"
            = f.number_field :packaged_quantity, min: 1, step: "any", class: "form-control"
        .col-xs-6
          .form-group
            = f.label :brand
            = f.text_field :brand, class: "form-control"
        .col-xs-6
          .form-group
            = f.label :standardized_size, "Size"
            = f.select(:standardized_size, options_for_select(Item::STANDARD_SIZES, @item.standardized_size), { include_blank: "" }, { class: "form-control" })

  .panel.panel-default
    %a.panel-heading{data: {toggle: "collapse"}, href: "#concentration"}
      Concentration
      %i.fa.fa-edit.pull-right
    .collapse{class: (@item.concentration_phrase.present? && "in" ), id: "concentration"}
      .row.form-row
        .col-xs-6
          .form-group
            = f.label :concentration, "Value"
            = f.number_field :concentration, min: 0, step: "any", class: "form-control"
        .col-xs-6
          .form-group
            = f.label :concentration_units, "Units"
            = f.select(:concentration_units, options_for_select(Item::RATIOS, @item.concentration_units), { include_blank: "" }, { class: "form-control" })
        .col-xs-12
          .form-group
            = f.label :concentration_description, "Description"
            = f.text_field :concentration_description, class: "form-control", placeholder: "eg: liquid, topical, paste"

  .panel.panel-default
    %a.panel-heading{data: {toggle: "collapse"}, href: "#measurement1"}
      Measurement 1
      %i.fa.fa-edit.pull-right
    .collapse{class: (@item.numerical_1_phrase.present? && "in" ), id: "measurement1"}
      .row.form-row
        .col-xs-6
          .form-group
            = f.label :numerical_size_1, "Value"
            = f.number_field :numerical_size_1, min: 0, step: "any", class: "form-control"
        .col-xs-6
          .form-group
            = f.label :numerical_units_1, "Units"
            = f.select(:numerical_units_1, options_for_select(Item::UNITS, @item.numerical_units_1), { include_blank: "" }, { class: "form-control" })
        .col-xs-12
          .form-group
            = f.label :numerical_description_1, "Description"
            = f.text_field :numerical_description_1, class: "form-control", placeholder: "eg: needle, tube, pill"

  .panel.panel-default
    %a.panel-heading{data: {toggle: "collapse"}, href: "#measurement2"}
      Measurement 2
      %i.fa.fa-edit.pull-right
    .collapse{class: (@item.numerical_2_phrase.present? && "in" ), id: "measurement2"}
      .row.form-row
        .col-xs-6
          .form-group
            = f.label :numerical_size_2, "Value"
            = f.number_field :numerical_size_2, min: 0, step: "any", class: "form-control"
        .col-xs-6
          .form-group
            = f.label :numerical_units_2, "Units"
            = f.select(:numerical_units_2, options_for_select(Item::UNITS, @item.numerical_units_2), { include_blank: "" }, { class: "form-control" })
        .col-xs-12
          .form-group
            = f.label :numerical_description_2, "Description"
            = f.text_field :numerical_description_2, class: "form-control", placeholder: "eg: vial, canister, blade"

  .row
    .col-xs-12
      .form-group
        = f.label :category
        = f.select(:category_id, options_from_collection_for_select(Category.order(:name), :id, :name, @item.category_id), { include_blank: "" }, { class: "form-control" })
    .col-xs-12
      .form-group
        = f.label :notes
        = f.text_field :notes, class: "form-control"

        -# .form-group
        -#   = f.label :photo
        -#   = f.file_field :photo, class: "form-control"
    -# .col-xs-12
    -#   .form-group
    -#     = f.label :keywords
    -#     = f.text_field :keywords, class: "form-control", placeholder: "Keywords can help searches or reviews"
  .row
    .col-xs-6
      .form-group
        = f.label :flagged, "Flag for Review?"
        = f.select(:flagged, options_for_select([true, false], @item.flagged), { include_blank: "" }, { class: "form-control" })

    .col-xs-6
      .form-group
        = f.label :verified
        = f.select(:verified, options_for_select([true, false], @item.verified), { include_blank: "" }, { class: "form-control" })
    .col-xs-12
      .form-group
        %label Created By
        = f.text_field :user, value: user, disabled: true, class: "form-control"

  .row
    .col-xs-12
      .form-group
        %label Created At
        = f.text_field :created_at, value: time, disabled: true, class: "form-control"
    .col-xs-12
      .btn-toolbar.list-toolbar
        - if @item.persisted?
          = delete_button(item_path(@item), "Are you sure you want to delete #{@item.generated_name}? This will also delete any items in boxes, pallets, containers and cannot be reversed.")
        = submit_button("Save")
