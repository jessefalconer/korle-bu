.content
  .header
    %h1.page-title #{params[:display].present? ? params[:display].titleize + " " : "" }Boxes
    %ul.breadcrumb
      %li
        = link_to "Home", index_path
      %li.active #{params[:display].present? ? params[:display].titleize + " " : "" }Boxes
    - if can? :create, Box
      = add_button(new_box_path, "Box", "fa-box-open")

    = form_for :box, url: find_box_path, html: {class: "inline-search-form" } do |f|
      = submit_button("Go To", nil, "fa-search")
      = f.number_field :custom_uid, {placeholder: "Custom ID"}

    - if @boxes.any?
      %button.btn.btn-primary{data: {target: "#mass-action-modal", toggle: "modal"}, disabled: true}
        %span.mass-action-count Mass Action
        %i.fa.fa-angle-double-right
      = render partial: "layouts/mass_action_modal", locals: {name: "boxes", redirect: boxes_path(display: params[:display])}

  .main-content
    - if @boxes.any?
      - if params[:display].present?
        %h5 Showing all #{params[:display]} boxes and any boxes on #{params[:display]} pallets.
      %table.table.table-striped.table-hover.link-rows
        %thead
          %tr
            %th Custom ID
            %th Name
            %th Status
            %th.hidden-xs Receiver
            %th.hidden-xs Created At
            %th
        %tbody
          - @boxes.each do |box|
            %tr
              %td
                = link_to box_path(box) do
                  %p= box.custom_uid
              %td
                = link_to box_path(box) do
                  %p= box.name
              %td
                = link_to box_path(box) do
                  %p{class: "status-#{box.status.parameterize}"}= box.status
              %td.hidden-xs
                = link_to box_path(box) do
                  %p= box&.shipment&.receiving_warehouse&.name
              %td.hidden-xs
                = link_to box_path(box) do
                  %p= box.created_at.strftime("%Y-%m-%d")
              %td
                = check_box_tag "box_ids[]", box.id, false, class: "mass-action-table", form: "mass_action", id: "mass-action-box-#{box.id}"

      = paginate @boxes, window: 2

    - else
      %h5.text-center No #{params[:display].present? ? params[:display] + " " : "" }boxes.
